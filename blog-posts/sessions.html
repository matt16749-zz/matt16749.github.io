<!DOCTYPE html>
<html>

<head>
  <title>Matthew Chan| Web Developer</title>
  <link rel="stylesheet" type="text/css" href="./stylesheets/blog_template.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='http://fonts.googleapis.com/css?family=Lora' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script type="text/javascript" src="./scripts/blog_template.js"></script>
</head>

<body>
  <header>
    <img src="./images/myself.jpg">
    <nav>
      <a class="font" href="../index.html">home</a> 
      <a class="font" href="../about.html">about</a>
      <a class="font" href="../blog_posts.html">blog</a>
      <a class="font" href="../projects.html">projects</a>
      <a class="font" href="../resources.html">resources</a>
      <a class="icon" href="http://www.github.com/matt16749"><i class="fa fa-github-square fa-2x"></i></a>
      <a class="icon" href="http://www.linkedin.com/in/matthewchan2000"><i class="fa fa-linkedin-square fa-2x"></i></a>
      <a class="icon" href="mailto:matt16749@gmail.com"><i class="fa fa-envelope-square fa-2x"></i></a>
    </nav>
  </header>

  <div class="titlename">NewUser/Login/Logout</div>

  <section>
    <article>
      <h1>Background</h1>
      <p>DevBootCamp has individual portfolio challenges in Phase 2, and one of the portfolio challenges is based upon creating a login page, a signup page, a view for users who have logged in, and a logout button. The premise of authorization and authentication is in setting up <strong>sessions(cookies) as helper methods</strong> and calling them within your controllers. Let's take a look at the views and corresponding routes in the controller.</p>
      <h1>Model and Migrations</h1>
        <h4>Migration file</h4>
        <img src="./images/p3migration.png">
        <p>The above is our migration file for the users table. We set password_hash on line 6 instead of password because we are using an encryption gem 'BCrypt'. <strong>hash is an encryption terminology in this sense, not the actual data structure in ruby.</strong></p>
        <h4>Model file</h4>
        <img src="./images/p3model.png">
        <p>The above is our User model.</p>
        <p>We have 2 methods in our model, a getter method <strong>password</strong> and a setter method <strong>password=</strong> which takes a parameter.</p>
        <p>The latter will take a parameter and create a new Password object(from BCrypt, which is basically encrypting our password with various numbers and letters), and sets our encrypted password string(Password object) to User attribute password_hash <strong>This is for signing up a new user.</strong></p>
        <p>The former will decrypt our Password object and compare our html form text input to a particular User(using User.find_by "different attribute")</p>
        <p>Let's walk through the views and corresponding code.</p>
        <h4>Sign up</h4>
        <img src="./images/p3signup.png">
        <p>This is the view that users see when they click on Sign Up in the top right corner. If users click on Sign in and are signed in, the two links on the top(Sign In and Sign Up) change to Sign Out. The code lies within the <strong>layout.erb</strong> view below:</p>
        <img src="./images/p3layoutcode.png">
        <p>The code for the sign-up form is located in a <strong>separate view</strong> below:</p>
        <img src="./images/p3signupform.png">
        <p>Notice what each name in the form is set to(lines 6, 10, and 14) as well as the URL request(line 4).</p>
        <p>Here is the corresponding code in the <strong>controller.rb</strong></p>
        <img src="./images/p3signupcontroller.png">
        <h4>Sign In</h4>
        <p>This is where things get tricky. If a user signs in, they need to be assigned a session(cookie) which are created as helper methods. Let's take a look at our <strong>helper file:</strong></p>
        <img src="./images/p3helpers.png">
        <p>Here is the view that the users will see:</p>
        <img src="./images/p3signinview.png">
        <p>Here is the corresponding code in the <strong>sign_in.erb</strong> view</p>
        <img src="./images/p3signing.png">
        <p>And the corresponding code in the <strong>controller.rb</strong>Session/cookie is given only if email and password exist in the same User object.</p>
        <img src="./images/signincontroller.png">        
        <h4>Signed In Or Not?</h4>
        <p>Below is the view for someone not signed in.</p>
        <img src="./images/p3notsigned.png">
        <p>And for someone signed in.</p>
        <img src="./images/p3signed.png">
        <p>The code for the <strong>controller is listed below:</strong></p>
        <img src="./images/p3conditionalcontroller.png">
        <p>The code for the <strong>index.erb view</strong> depending on whether or not a user is signed in is below: (uses conditionals)</p>
        <img src="./images/p3view.png">

        <h4>Sign Out</h4>
        <p>To sign out, just delete the session/cookie.(As a helper method, the sign-out view button is located in the layout.erb file.</p>
        <p>Here is the delete code in the <strong>index.rb controller</strong></p>
        <img src="./images/p3deletecontroller.png">
        <p>Here is the delete code in the <strong>layout.erb view</strong></p>
        <img src="./images/p3deleteviewcode.png">
    </article>
  </section>

  <img id="cloud0" src="./images/cloud0.png">
  <img id="cloud1" src="./images/cloud1.png">
  <img id="cloud2" src="./images/cloud2.png">
</body>

</html>